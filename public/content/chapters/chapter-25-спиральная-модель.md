# СПИРАЛЬНАЯ МОДЕЛЬ


**Спиральная модель** - классический пример применения эволюцион
ной стратегии конструирования.
**Спиральная модель** (автор Барри Боэм, 1988) базируется на лучших
свойствах классического жизненного цикла и макетирования, к которым
добавляется новый элемент - **анализ** риска, отсутствующий в этих пара
дигмах [22].
Как показано на рисунке 4.6, модель определяет четыре действия,
представляемые четырьмя квадрантами спирали.
1. Планирование - определение целей, вариантов и ограничений.
2. **Анализ** риска - **анализ** вариантов и распознавание/выбор риска.
3. Конструирование - разработка продукта следующего уровня.
4. Оценивание - оценка заказчиком текущих результатов конструи
рования.
Интегрирующий аспект спиральной модели очевиден при учёте ра
диального измерения спирали. С каждой итерацией по спирали (продви
жением от центра к периферии) строятся всё более полные версии ПО.
В первом витке спирали определяются начальные цели, варианты и
ограничения, распознаётся и анализируется риск. Если **анализ** риска пока
зывает неопределённость требований, на помощь разработчику и заказчи
ку приходит **макетирование** (используемое в квадранте конструирования).
Рис. 4.6. **Спиральная модель**:
1 - начальный сбор требований и планирование проекта; 2 - та же работа,
но на основе рекомендаций заказчика; 3 - **анализ** риска на основе начальных
требований; 4 - **анализ** риска на основе реакции заказчика; 5 - переход к
комплексной системе; 6 - начальный макет системы; 7 - следующий уровень
макета; 8 - сконструированная система; 9 - оценивание заказчиком
Для дальнейшего определения проблемных и уточнённых требова
ний может быть использовано моделирование. Заказчик оценивает инже
нерную (конструкторскую) работу и вносит предложения по модифика
ции (квадрант оценки заказчиком). Следующая фаза планирования и ана
лиза риска базируется на предложениях заказчика. В каждом цикле по
спирали результаты анализа риска формируются в виде «продолжать, не
продолжать». Если риск слишком велик, проект может быть остановлен.
В большинстве случаев движение по спирали продолжается, с каж
дым шагом продвигая разработчиков к более общей модели системы.
В каждом цикле по спирали требуется конструирование (нижний правый
квадрант), которое может быть реализовано классическим жизненным
циклом или макетированием. Заметим, что количество действий по разра
ботке (происходящих в правом нижнем квадранте) возрастает по мере
продвижения от центра спирали.
Достоинства спиральной модели:
1) наиболее реально (в виде эволюции) отображает разработку про
граммного обеспечения;
2) позволяет явно учитывать риск на каждом витке эволюции разра
ботки;
3) включает шаг системного подхода в итерационную структуру
разработки;
4) использует моделирование для уменьшения риска и совершенст
вования программного изделия.
Недостатки спиральной модели:
1) новизна (отсутствует достаточная статистика эффективности мо
дели);
2) повышенные требования к заказчику;
3) трудности контроля и управления временем разработки.
**КОМПОНЕНТНО-ОРИЕНТИРОВАННАЯ МОДЕЛЬ**
**Компонентно-ориентированная модель** является развитием спираль
ной модели и тоже основывается на эволюционной стратегии конструиро
вания. В этой модели конкретизируется содержание квадранта конструи
рования - оно отражает тот факт, что в современных условиях новая раз
работка должна основываться на повторном использовании существую
щих программных компонентов (рис. 4.7).
Рис. 4.7. **Компонентно-ориентированная модель**
Программные компоненты, созданные в реализованных программ
ных проектах, хранятся в библиотеке. В новом программном проекте, ис
ходя из требований заказчика, выявляются кандидаты в компоненты. Да
лее проверяется наличие этих кандидатов в библиотеке. Если они найде
ны, то компоненты извлекаются из библиотеки и используются повторно.
В противном случае создаются новые компоненты, они применяются в
проекте и включаются в библиотеку.
Достоинства компонентно-ориентированной модели:
1) уменьшает на **30%** время разработки программного продукта;
2) уменьшает стоимость программной разработки до **70%**;
3) увеличивает в полтора раза производительность разработки.
ТЯЖЕЛОВЕСНЫЕ И **ОБЛЕГЧЁННЫЕ ПРОЦЕССЫ**
Традиционно для упорядочения и ускорения программных разрабо
ток предлагались строго упорядочивающие тяжеловесные (heavyweight)
процессы. В этих процессах прогнозируется весь объём предстоящих ра
бот, поэтому они называются прогнозирующими (predictive) процессами.
Порядок, который должен выполнять при этом человек-разработчик,
чрезвычайно строг.
В последние годы появилась группа новых, облегчённых
(lightweight) процессов [23]. Теперь их называют подвижными (agile) про
цессами. Они привлекательны отсутствием бюрократизма, характерного
для тяжеловесных (прогнозирующих) процессов. Новые процессы долж
ны воплотить в жизнь разумный компромисс между слишком строгой
дисциплиной и полным её отсутствием. Иначе говоря, порядка в процес
сах разработки достаточно для того, чтобы получить разумную отдачу от
разработчиков.
Подвижные процессы требуют меньшего объёма документации и
ориентированы на человека. В них явно указано на необходимость ис
пользования природных качеств человеческой натуры (а не на примене
ние действий, направленных наперекор этим качествам).
Более того, подвижные процессы учитывают особенности современ
ного заказчика, а именно частые изменения его требований к программ
ному продукту. Известно, что для прогнозирующих процессов частые
изменения требований подобны смерти. В отличие от них, подвижные
процессы адаптируют изменения требований и даже выигрывают от это
го. Словом, подвижные процессы имеют адаптивную природу.
Таким образом, в современной инфраструктуре программной инже
нерии существуют два семейства процессов разработки:
семейство прогнозирующих (тяжеловесных) процессов;
семейство адаптивных (подвижных, облегчённых) процессов.
У каждого семейства есть свои достоинства, недостатки и область
применения:
адаптивный процесс используют при частых изменениях требо
ваний, малочисленной группе высококвалифицированных разработчиков
и грамотном заказчике, который согласен участвовать в разработке;
прогнозирующий процесс применяют при фиксированных требо
ваниях и многочисленной группе разработчиков разной квалификации.
**ХР-ПРОЦЕСС**
**Экстремальное программирование** (eXtreme Programming, **XP**) - об
легчённый (подвижный) процесс (или методология) [24]. **ХР-процесс** ори
ентирован на группы малого и среднего размера, строящие программное
обеспечение в условиях неопределенных или быстро изменяющихся тре
бований. ХР-группу образуют до 10 сотрудников, которые размещаются в
одном помещении.
Основная идея ХР - устранить высокую стоимость изменения, харак
терную для приложений с использованием объектов, паттернов* и реля
ционных баз данных. Поэтому **ХР-процесс** должен быть высокодинамич
ным процессом. ХР-группа имеет дело с изменениями требований на всём
протяжении итерационного цикла разработки, причём цикл состоит из
очень коротких итераций. Четырьмя базовыми действиями в ХР-цикле
являются: **кодирование**, **тестирование**, выслушивание заказчика и проек
тирование. Динамизм обеспечивается с помощью четырёх характеристик:
непрерывной связи с заказчиком (и в пределах группы), простоты (всегда
выбирается минимальное решение), быстрой обратной связи (с помощью
модульного и функционального тестирования), смелости в проведении
профилактики возможных проблем.
Большинство принципов, поддерживаемых в ХР (минимальность, про
стота, эволюционный цикл разработки, малая длительность итерации,
участие пользователя, оптимальные стандарты кодирования и т.д.), про
диктованы здравым смыслом и применяются в любом упорядоченном
процессе. Просто в ХР эти принципы, как показано в табл. 4.2, достигают
«экстремальных значений».
4.2. Экстремумы в экстремальном программировании
Практика
здравого смысла
ХР-экстремум
Проверки кода Код проверяется всё время
ХР-реализация
Парное
программирование
**Тестирование**
**Тестирование** выполняется всё
время, даже с помощью заказчиков
**Тестирование**
модуля,
функциональное
**тестирование**
Продолжение табл. 4.2
Практика
здравого смысла
ХР-экстремум
**Проектирование** **Проектирование** является частью
ежедневной деятельности каждого
разработчика
ХР-реализация
Реорганизация
(refactoring)
Простота
Для системы выбирается простей
шее проектное решение, поддер
живающее её текущую функцио
нальность
Самая простая
вещь, которая
могла бы работать
Архитектура
Каждый постоянно работает над
уточнением архитектуры
**Тестирование**
интеграции
Метафора
Интегрируется и тестируется не
сколько раз в день
Непрерывная
интеграция
Короткие
итерации
Итерации являются предельно ко
роткими, продолжаются секунды,
минуты, часы, а не недели, месяцы
или годы
Игра планирования
Тот, кто принимает принцип «минимального решения» за хакерство,
ошибается, в действительности ХР - строго упорядоченный процесс.
Простые решения, имеющие высший приоритет, в настоящее время рас
сматриваются как наиболее ценные части системы, в отличие от проект
ных решений, которые пока не нужны, а могут (в условиях изменения
требований и операционной среды) и вообще не понадобиться.
Базис ХР образуют перечисленные ниже двенадцать методов.
1. Игра планирования (Planning game) - быстрое определение облас
ти действия следующей реализации путём объединения деловых приори
тетов и технических оценок. Заказчик формирует область действия, при
оритетность и сроки с точки зрения бизнеса, а разработчики оценивают и
прослеживают продвижение (прогресс).
2. Частая смена версий (Small releases) - быстрый запуск в произ
водство простой системы. Новые версии реализуются в очень коротком
(двухнедельном) цикле.
3. Метафора (Metaphor) - вся разработка проводится на основе про
стой, общедоступной истории о том, как работает вся система.
4. Простое **проектирование** (Simple design) - **проектирование** вы
полняется настолько просто, насколько это возможно в данный момент.
5. **Тестирование** (Testing) - непрерывное написание тестов для мо
дулей, которые должны выполняться безупречно; заказчики пишут тесты
для демонстрации законченности функций. «Тестируй, а затем кодируй»
означает, что входным критерием для написания кода является «отказав
ший» тестовый вариант.
6. Реорганизация (Refactoring) - система реструктурируется, но её
поведение не изменяется; цель - устранить дублирование, улучшить
взаимодействие, упростить систему или добавить в неё гибкость.
7. Парное программирование (Pair programming) - весь код пишется
двумя программистами, работающими на одном компьютере.
8. Коллективное владение кодом (Collective ownership) - любой
разработчик может улучшать любой код системы в любое время.
9. Непрерывная интеграция (Continuous integration) - система ин
тегрируется и строится много раз в день по мере завершения каждой зада
чи. Непрерывное регрессионное **тестирование**, т.е. повторение предыду
щих тестов гарантирует, что изменения требований не приведут к регрес
су функциональности.
10. 40-часовая неделя (40-hour week) - как правило, работают не бо
лее 40 часов в неделю. Нельзя удваивать рабочую неделю за счёт сверх
урочных работ.
11. Локальный заказчик (On-site customer) - в группе всё время дол
жен находиться представитель заказчика, действительно готовый отвечать
на вопросы разработчиков.
12. Стандарты кодирования (Coding standards) - должны выдержи
ваться правила, обеспечивающие одинаковое представление программно
го кода во всех частях программной системы.
Игра планирования и частая смена версий зависят от заказчика,
обеспечивающего набор «историй» (коротких описаний), характеризую
щих работу, которая будет выполняться для каждой версии системы. Вер
сии генерируются каждые две недели, поэтому разработчики и заказчик
должны прийти к соглашению о том, какие истории будут осуществлены
в пределах двух недель. Полную функциональность, требуемую заказчи
ку, характеризует пул историй; но для следующей двухнедельной итера
ции из пула выбирается подмножество историй, наиболее важное для за
казчика. В любое время в пул могут быть добавлены новые истории, та
ким образом, требования могут быстро изменяться. Однако процессы
двухнедельной генерации основаны на наиболее важных функциях, вхо
дящих в текущий пул, следовательно, изменчивость управляется. Локаль
ный заказчик обеспечивает поддержку этого стиля итерационной разра
ботки.
«Метафора» обеспечивает глобальное «видение» проекта. Она могла
бы рассматриваться как высокоуровневая архитектура, но ХР подчёркива
ет желательность проектирования при минимизации проектной докумен
тации. Точнее говоря, ХР предлагает непрерывное перепроектирование
(с помощью реорганизации), при котором нет нужды в детализированной
проектной документации, а для инженеров сопровождения единственным
надёжным источником информации является программный код. Обычно
после написания кода проектная документация выбрасывается. Проектная
документация сохраняется только в том случае, когда заказчик временно
теряет способность придумывать новые истории. Тогда систему помеща
ют в «нафталин» и пишут руководство страниц на пять-десять по «нафта
линовому» варианту системы. Использование реорганизации приводит к
реализации простейшего решения, удовлетворяющего текущую потреб
ность. Изменения в требованиях заставляют отказываться от всех «общих
решений».
Парное программирование - один из наиболее спорных методов в
ХР, оно влияет на ресурсы, что важно для менеджеров, решающих, будет
ли проект использовать ХР. Может показаться, что парное программиро
вание удваивает ресурсы, но исследования доказали: парное программи
рование приводит к повышению качества и уменьшению времени цикла.
Для согласованной группы затраты увеличиваются на **15%**, а время цикла
сокращается на 40…**50%**. Для Интернет-среды увеличение скорости про
даж покрывает повышение затрат. Сотрудничество улучшает процесс ре
шения проблем, улучшение качества существенно снижает затраты со
провождения, которые превышают стоимость дополнительных ресурсов
по всему циклу разработки.
Коллективное владение означает, что любой разработчик может из
менять любой фрагмент кода системы в любое время. Непрерывная инте
грация, непрерывное регрессионное **тестирование** и парное программиро
вание ХР обеспечивают защиту от возникающих при этом проблем.
«Тестируй, а затем кодируй» - эта фраза выражает акцент ХР на тес
тировании. Она отражает принцип, по которому сначала планируется тес
тирование, а тестовые варианты разрабатываются параллельно анализу
требований, хотя традиционный подход состоит в тестировании «чёрного
ящика». Размышление о тестировании в начале цикла жизни - хорошо
известная практика конструирования ПО (правда, редко осуществляемая
практически).
Основным средством управления ХР является метрика, а среда мет
рик - «большая визуальная диаграмма». Обычно используют 3-4 метрики,
причём такие, которые видимы всей группе. Рекомендуемой в ХР метри
кой является «скорость проекта» - количество историй заданного размера,
которые могут быть реализованы в итерации.
При принятии ХР рекомендуется осваивать его методы по одному,
каждый раз выбирая метод, ориентированный на самую трудную пробле
му группы. Конечно, все эти методы являются «не более чем правилами» -
группа может в любой момент поменять их (если её сотрудники достигли
принципиального соглашения по поводу внесённых изменений). Защит
ники ХР признают, что ХР оказывает сильное социальное воздействие, и
не каждый может принять его. Вместе с тем, ХР - это методология, обес
печивающая преимущества только при использовании законченного на
бора базовых методов.
Рассмотрим структуру «идеального» **ХР-процесс**а. Основным струк
турным элементом процесса является ХР-реализация, в которую много
кратно вкладывается базовый элемент - ХР-итерация. В состав ХР-реали-
зации и ХР-итерации входят три фазы - исследование, блокировка, регу
лирование. Исследование (exploration) - это поиск новых требований
(историй, задач), которые должна выполнять система. Блокировка (com
mitment) - выбор для реализации конкретного подмножества из всех воз
можных требований (иными словами, планирование). Регулирование
(steering) - проведение разработки, воплощение плана в жизнь.
ХР рекомендует: первая реализация должна иметь длительность
2 - 6 месяцев, продолжительность остальных реализаций - около двух
Рис. 4.8. Идеальный **ХР-процесс**
месяцев, каждая итерация длится приблизительно две недели, а числен
ность группы разработчиков не превышает 10 человек. **ХР-процесс** для
проекта с семью реализациями, осуществляемый за 15 месяцев, показан
на рис. 4.8.
Процесс инициируется начальной исследовательской фазой.
Фаза исследования, с которой начинается любая реализация и итера
ция, имеет клапан «пропуска», на этой фазе принимается решение о целе
сообразности дальнейшего продолжения работы.
Предполагается, что длительность первой реализации составляет
3 месяца, длительность второй - седьмой реализаций - 2 месяца. Вторая -
седьмая реализации образуют период сопровождения, характеризующий
природу ХР-проекта. Каждая итерация длится две недели, за исключени
ем тех, которые относят к поздней стадии реализации - «запуску в произ
водство» (в это время темп итерации ускоряется).
Наиболее трудна первая реализация - пройти за три месяца от обычно
го старта (скажем, отдельный сотрудник не зафиксировал никаких требо
ваний, не определены ограничения) к поставке заказчику системы про
мышленного качества.